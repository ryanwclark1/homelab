#!/usr/bin/env bash
# Storage health check script
# Generated by Ansible

set -e

echo "=== Storage Health Check $(date) ==="

# ZFS pool status
{% for pool in storage_pools %}
{% if pool.type == 'zfs' %}
echo ""
echo "ZFS Pool: {{ pool.name }}"
zpool status {{ pool.name }}
zpool list {{ pool.name }}
{% endif %}
{% endfor %}

# Check for disk errors
echo ""
echo "Checking for disk errors..."
dmesg | grep -i "error" | tail -20 || echo "No recent disk errors"

echo "=== Storage Check Complete ==="
